<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8"/>
		<title>Function Connection.release</title>
		<link rel="stylesheet" type="text/css" href="../../styles/ddox.css"/>
		<link rel="stylesheet" href="../../prettify/prettify.css" type="text/css"/>
		<script type="text/javascript" src="../../scripts/jquery.js">/**/</script><script type="text/javascript" src="../../scripts/ddox.js">/**/</script>
	</head>
	<body onload="setupDdox();">
		<nav id="main-nav">
			<noscript>
				<p style="color: red">The search functionality needs JavaScript enabled</p>
			</noscript>
			<div id="symbolSearchPane" style="display: none">
				<form action="#" method="GET">
					<input id="symbolSearch" type="text" name="q" placeholder="Search for symbols" autocomplete="off" onchange="performSymbolSearch(40);" onkeypress="this.onchange();" onpaste="this.onchange();" oninput="this.onchange();"/>
				</form>
				<ul id="symbolSearchResults" class="symbolList" style="display: none"></ul><script type="application/javascript" src="../../symbols.js"></script><script type="application/javascript">var symbolSearchRootDir = "../../";
$('#symbolSearchPane').show();</script>
			</div>
			<ul class="tree-view">
				<li class="tree-view ">
					<div class="package ">
						<a href="../../mysql.html">mysql</a>
					</div>
			<ul class="tree-view">
				<li class="tree-view collapsed">
					<div class="package ">protocol
					</div>
			<ul class="tree-view">
				<li>
					<div class="module ">
						<a href="../../mysql/protocol/comms.html">comms</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/protocol/constants.html">constants</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/protocol/extra_types.html">extra_types</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/protocol/packet_helpers.html">packet_helpers</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/protocol/packets.html">packets</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/protocol/sockets.html">sockets</a>
					</div>
				</li>
			</ul>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/commands.html">commands</a>
					</div>
				</li>
				<li>
					<div class="module selected">
						<a href="../../mysql/connection.html">connection</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/escape.html">escape</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/exceptions.html">exceptions</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/metadata.html">metadata</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/pool.html">pool</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/prepared.html">prepared</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/result.html">result</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/types.html">types</a>
					</div>
				</li>
			</ul>
				</li>
			</ul>
		</nav>
		<div id="main-contents">
			<h1>Function Connection.release</h1><p>Manually release a prepared statement on this connection.
</p>
			<div class="prototype">
				<code class="lang-d">
					<div class="single-prototype">
			<span class="typ">void</span> <span class="pln">release</span>
			<span class="pun">(</span>
			<br/>
			&nbsp;&nbsp;<a href="../../mysql/prepared/Prepared.html"><span class="typ">Prepared</span></a> <span class="pln">prepared</span>
			<br/>
			<span class="pun">)</span><span class="pun">;</span>
			<br/>
			<br/>
			<span class="typ">void</span> <span class="pln">release</span>
			<span class="pun">(</span>
			<br/>
			&nbsp;&nbsp;<span class="kwd">const</span><span class="pun">(</span><span class="typ">char</span><span class="pun">[]</span><span class="pun">)</span> <span class="pln">sql</span>
			<br/>
			<span class="pun">)</span><span class="pun">;</span>
					</div>
				</code>
			</div>
			<section><p>This method tells the server that it can dispose of the information it
	holds about the current prepared statement.
</p>

<p>	Calling this is not strictly necessary. The server considers prepared
	statements to be per-connection, so they'll go away when the connection
	closes anyway. This is provided in case direct control is actually needed.
</p>

<p>	If you choose to use a reference counted struct to call this automatically,
	be aware that embedding reference counted structs inside garbage collectible
	heap objects is dangerous and should be avoided, as it can lead to various
	hidden problems, from crashes to race conditions. (See the discussion at issue
	<a href="https://github.com/mysql-d/mysql-native/issues/159">#159</a>
	for details.) Instead, it may be better to simply avoid trying to manage
	their release at all, as it's not usually necessary. Or to periodically
	release all prepared statements, and simply allow mysql-native to
	automatically re-register them upon their next use.
</p>
</section>

			<section><h2>Notes</h2>
<p>In actuality, the server might not immediately be told to release the
	statement (although <code class="lang-d"><a href="../../mysql/connection/Connection.isRegistered.html"><span class="pln">isRegistered</span></a></code> will still report <code class="lang-d"><span class="kwd">false</span></code>).
</p>

<p>	This is because there could be a <code class="lang-d"><a href="../../mysql/result/ResultRange.html" title="mysql.result.ResultRange"><span class="typ">ResultRange</span></a></code> with results
	still pending for retrieval, and the protocol doesn't allow sending commands
	(such as "release a prepared statement") to the server while data is pending.
	Therefore, this function may instead queue the statement to be released
	when it is safe to do so: Either the next time a result set is purged or
	the next time a command (such as <code class="lang-d"><a href="../../mysql/commands/query.html" title="mysql.commands.query"><span class="pln">query</span></a></code> or
	<code class="lang-d"><a href="../../mysql/commands/exec.html" title="mysql.commands.exec"><span class="pln">exec</span></a></code>) is performed (because such commands automatically
	purge any pending results).
</p>

<p>	This function does NOT auto-purge because, if this is ever called from
	automatic resource management cleanup (refcounting, RAII, etc), that
	would create ugly situations where hidden, implicit behavior triggers
	an unexpected auto-purge.
</p>
</section>

			<footer>
				<table class="license-info">
					<tr>
						<th>Authors</th>
						<td>
							
						</td>
					</tr>
					<tr>
						<th>Copyright</th>
						<td>
							
						</td>
					</tr>
					<tr>
						<th>License</th>
						<td>
							
						</td>
					</tr>
				</table>
				<p class="faint">Generated using the DDOX documentation generator</p>
			</footer>
		</div>
	</body>
</html>