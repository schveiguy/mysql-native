<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8"/>
		<title>Alias MySQLVal</title>
		<link rel="stylesheet" type="text/css" href="../../styles/ddox.css"/>
		<link rel="stylesheet" href="../../prettify/prettify.css" type="text/css"/>
		<script type="text/javascript" src="../../scripts/jquery.js">/**/</script><script type="text/javascript" src="../../scripts/ddox.js">/**/</script>
	</head>
	<body onload="setupDdox();">
		<nav id="main-nav">
			<noscript>
				<p style="color: red">The search functionality needs JavaScript enabled</p>
			</noscript>
			<div id="symbolSearchPane" style="display: none">
				<form action="#" method="GET">
					<input id="symbolSearch" type="text" name="q" placeholder="Search for symbols" autocomplete="off" onchange="performSymbolSearch(40);" onkeypress="this.onchange();" onpaste="this.onchange();" oninput="this.onchange();"/>
				</form>
				<ul id="symbolSearchResults" class="symbolList" style="display: none"></ul><script type="application/javascript" src="../../symbols.js"></script><script type="application/javascript">var symbolSearchRootDir = "../../";
$('#symbolSearchPane').show();</script>
			</div>
			<ul class="tree-view">
				<li class="tree-view ">
					<div class="package ">
						<a href="../../mysql.html">mysql</a>
					</div>
			<ul class="tree-view">
				<li class="tree-view collapsed">
					<div class="package ">impl
					</div>
			<ul class="tree-view">
				<li>
					<div class="module ">
						<a href="../../mysql/impl/connection.html">connection</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/impl/pool.html">pool</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/impl/prepared.html">prepared</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/impl/result.html">result</a>
					</div>
				</li>
			</ul>
				</li>
				<li class="tree-view collapsed">
					<div class="package ">protocol
					</div>
			<ul class="tree-view">
				<li>
					<div class="module ">
						<a href="../../mysql/protocol/comms.html">comms</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/protocol/constants.html">constants</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/protocol/extra_types.html">extra_types</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/protocol/packet_helpers.html">packet_helpers</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/protocol/packets.html">packets</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/protocol/sockets.html">sockets</a>
					</div>
				</li>
			</ul>
				</li>
				<li class="tree-view collapsed">
					<div class="package ">
						<a href="../../mysql/safe.html">safe</a>
					</div>
			<ul class="tree-view">
				<li>
					<div class="module ">
						<a href="../../mysql/safe/commands.html">commands</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/safe/connection.html">connection</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/safe/pool.html">pool</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/safe/prepared.html">prepared</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/safe/result.html">result</a>
					</div>
				</li>
			</ul>
				</li>
				<li class="tree-view collapsed">
					<div class="package ">
						<a href="../../mysql/unsafe.html">unsafe</a>
					</div>
			<ul class="tree-view">
				<li>
					<div class="module ">
						<a href="../../mysql/unsafe/commands.html">commands</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/unsafe/connection.html">connection</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/unsafe/pool.html">pool</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/unsafe/prepared.html">prepared</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/unsafe/result.html">result</a>
					</div>
				</li>
			</ul>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/commands.html">commands</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/connection.html">connection</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/escape.html">escape</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/exceptions.html">exceptions</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/metadata.html">metadata</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/pool.html">pool</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/prepared.html">prepared</a>
					</div>
				</li>
				<li>
					<div class="module ">
						<a href="../../mysql/result.html">result</a>
					</div>
				</li>
				<li>
					<div class="module selected">
						<a href="../../mysql/types.html">types</a>
					</div>
				</li>
			</ul>
				</li>
			</ul>
		</nav>
		<div id="main-contents">
			<h1>Alias MySQLVal</h1><p>MySQLVal is mysql-native's tagged algebraic type that supports only @safe usage
(see <a href="http://code.dlang.org/packages/taggedalgebraic">TaggedAlgebraic</a>
for more information on the features of this type). Note that TaggedAlgebraic
has UFCS methods that are not available without importing that module in your
code.
</p>
			<div class="prototype">
				<code class="lang-d">
					<div class="single-prototype">
			<span class="kwd">alias</span> <span class="pln">MySQLVal</span>
			 <span class="pun">=</span> <span class="pln">taggedalgebraic<wbr/></span><span class="pun">.</span><span class="pln">taggedalgebraic<wbr/></span><span class="pun">.</span><span class="typ">TaggedAlgebraic</span>!(mysql.types._MYTYPE)<span class="pun">;</span>
					</div>
				</code>
			</div>
			<section><p>The type can hold any possible type that MySQL can use or return. The MYTYPE
union, which is a private union for the project, defines the names of the types
that can be stored. These names double as the names for the MySQLVal.Kind
enumeration. To that end, this is the entire union definition:
</p>

<pre class="code"><code class="lang-d"><span class="kwd">private union </span><span class="pln">_MYTYPE
</span><span class="pun">{
	</span><span class="typ">ubyte</span><span class="pun">[] </span><span class="typ">Blob</span><span class="pun">;
	</span><span class="kwd">const</span><span class="pun">(</span><span class="typ">ubyte</span><span class="pun">)[] </span><span class="typ">CBlob</span><span class="pun">;

	</span><span class="kwd">typeof</span><span class="pun">(</span><span class="kwd">null</span><span class="pun">) </span><span class="typ">Null</span><span class="pun">;
	</span><span class="typ">bool Bit</span><span class="pun">;
	</span><span class="typ">ubyte UByte</span><span class="pun">;
	</span><span class="typ">byte Byte</span><span class="pun">;
	</span><span class="typ">ushort UShort</span><span class="pun">;
	</span><span class="typ">short Short</span><span class="pun">;
	</span><span class="typ">uint UInt</span><span class="pun">;
	</span><span class="typ">int Int</span><span class="pun">;
	</span><span class="typ">ulong ULong</span><span class="pun">;
	</span><span class="typ">long Long</span><span class="pun">;
	</span><span class="typ">float Float</span><span class="pun">;
	</span><span class="typ">double Double</span><span class="pun">;
	</span><span class="pln">std<wbr/></span><span class="pun">.</span><span class="pln">datetime<wbr/></span><span class="pun">.</span><span class="typ">DateTime DateTime</span><span class="pun">;
	</span><span class="pln">std<wbr/></span><span class="pun">.</span><span class="pln">datetime<wbr/></span><span class="pun">.</span><span class="typ">TimeOfDay Time</span><span class="pun">;
	<a href="../../mysql/types/Timestamp.html" title="mysql.types.Timestamp"></span><span class="typ">Timestamp</span></a><span class="pln"> </span><span class="typ">Timestamp</span><span class="pun">;
	</span><span class="pln">std<wbr/></span><span class="pun">.</span><span class="pln">datetime<wbr/></span><span class="pun">.</span><span class="typ">Date Date</span><span class="pun">;

	</span><span class="typ">string Text</span><span class="pun">;
	</span><span class="kwd">const</span><span class="pun">(</span><span class="typ">char</span><span class="pun">)[] </span><span class="typ">CText</span><span class="pun">;

	</span><span class="com">// pointers
	</span><span class="kwd">const</span><span class="pun">(</span><span class="typ">bool</span><span class="pun">)* </span><span class="typ">BitRef</span><span class="pun">;
	</span><span class="kwd">const</span><span class="pun">(</span><span class="typ">ubyte</span><span class="pun">)* </span><span class="typ">UByteRef</span><span class="pun">;
	</span><span class="kwd">const</span><span class="pun">(</span><span class="typ">byte</span><span class="pun">)* </span><span class="typ">ByteRef</span><span class="pun">;
	</span><span class="kwd">const</span><span class="pun">(</span><span class="typ">ushort</span><span class="pun">)* </span><span class="typ">UShortRef</span><span class="pun">;
	</span><span class="kwd">const</span><span class="pun">(</span><span class="typ">short</span><span class="pun">)* </span><span class="typ">ShortRef</span><span class="pun">;
	</span><span class="kwd">const</span><span class="pun">(</span><span class="typ">uint</span><span class="pun">)* </span><span class="typ">UIntRef</span><span class="pun">;
	</span><span class="kwd">const</span><span class="pun">(</span><span class="typ">int</span><span class="pun">)* </span><span class="typ">IntRef</span><span class="pun">;
	</span><span class="kwd">const</span><span class="pun">(</span><span class="typ">ulong</span><span class="pun">)* </span><span class="typ">ULongRef</span><span class="pun">;
	</span><span class="kwd">const</span><span class="pun">(</span><span class="typ">long</span><span class="pun">)* </span><span class="typ">LongRef</span><span class="pun">;
	</span><span class="kwd">const</span><span class="pun">(</span><span class="typ">float</span><span class="pun">)* </span><span class="typ">FloatRef</span><span class="pun">;
	</span><span class="kwd">const</span><span class="pun">(</span><span class="typ">double</span><span class="pun">)* </span><span class="typ">DoubleRef</span><span class="pun">;
	</span><span class="kwd">const</span><span class="pun">(</span><span class="typ">DateTime</span><span class="pun">)* </span><span class="typ">DateTimeRef</span><span class="pun">;
	</span><span class="kwd">const</span><span class="pun">(</span><span class="typ">TimeOfDay</span><span class="pun">)* </span><span class="typ">TimeRef</span><span class="pun">;
	</span><span class="kwd">const</span><span class="pun">(</span><span class="typ">Date</span><span class="pun">)* </span><span class="typ">DateRef</span><span class="pun">;
	</span><span class="kwd">const</span><span class="pun">(</span><span class="typ">string</span><span class="pun">)* </span><span class="typ">TextRef</span><span class="pun">;
	</span><span class="kwd">const</span><span class="pun">(</span><span class="typ">char</span><span class="pun">[])* </span><span class="typ">CTextRef</span><span class="pun">;
	</span><span class="kwd">const</span><span class="pun">(</span><span class="typ">ubyte</span><span class="pun">[])* </span><span class="typ">BlobRef</span><span class="pun">;
	</span><span class="kwd">const</span><span class="pun">(<a href="../../mysql/types/Timestamp.html"></span><span class="typ">Timestamp</span></a><span class="pun">)* </span><span class="typ">TimestampRef</span><span class="pun">;
}</span></code></pre>

<p>Note that the pointers are all const, as the only use case in mysql-native for them is as rebindable parameters to a Prepared struct.
</p>

<p>MySQLVal allows operations, field, and member function access for each of the supported types without unwrapping the MySQLVal value. For example:
</p>

<pre class="code"><code class="lang-d"><span class="kwd">import <a href="../../mysql/safe.html"></span><span class="pln">mysql<wbr/></span><span class="pun">.</span><span class="pln">safe</span></a><span class="pun">;

</span><span class="com">// support for comparison is valid for any type that supports it
</span><span class="kwd">assert</span><span class="pun">(</span><span class="pln">conn<wbr/></span><span class="pun">.</span><span class="pln">queryValue</span><span class="pun">(</span><span class="str">"SELECT COUNT(*) FROM sometable"</span><span class="pun">) &gt; </span><span class="lit">20</span><span class="pun">);

</span><span class="com">// access members of supporting types without unwrapping or verifying type first
</span><span class="kwd">assert</span><span class="pun">(</span><span class="pln">conn<wbr/></span><span class="pun">.</span><span class="pln">queryValue</span><span class="pun">(</span><span class="str">"SELECT updated_date FROM someTable WHERE id=5"</span><span class="pun">)<wbr/>.</span><span class="pln">year </span><span class="pun">== </span><span class="lit">2020</span><span class="pun">);

</span><span class="com">// arithmetic is supported, return type may vary
</span><span class="kwd">auto </span><span class="pln">val </span><span class="pun">= </span><span class="pln">conn<wbr/></span><span class="pun">.</span><span class="pln">queryValue</span><span class="pun">(</span><span class="str">"SELECT some_integer FROM sometable WHERE id=5"</span><span class="pun">) + </span><span class="lit">100</span><span class="pun">;
</span><span class="kwd">static assert</span><span class="pun">(</span><span class="kwd">is</span><span class="pun">(</span><span class="kwd">typeof</span><span class="pun">(</span><span class="pln">val</span><span class="pun">) == </span><span class="typ">MySQLVal</span><span class="pun">));
</span><span class="kwd">assert</span><span class="pun">(</span><span class="pln">val<wbr/></span><span class="pun">.</span><span class="pln">kind </span><span class="pun">== </span><span class="typ">MySQLVal<wbr/></span><span class="pun">.</span><span class="typ">Kind<wbr/></span><span class="pun">.</span><span class="typ">Int</span><span class="pun">);

</span><span class="com">// this will be a double and not a MySQLVal, because all types that support
// addition with a double result in a double.
</span><span class="kwd">auto </span><span class="pln">val2 </span><span class="pun">= </span><span class="pln">conn<wbr/></span><span class="pun">.</span><span class="pln">queryValue</span><span class="pun">(</span><span class="str">"SELECT some_float FROM sometable WHERE id=5"</span><span class="pun">) + </span><span class="lit">100.0</span><span class="pun">;
</span><span class="kwd">static assert</span><span class="pun">(</span><span class="kwd">is</span><span class="pun">(</span><span class="kwd">typeof</span><span class="pun">(</span><span class="pln">val2</span><span class="pun">) == </span><span class="typ">double</span><span class="pun">));</span></code></pre>

<p>Note that per [TaggedAlgebraic's API](https://vibed.org/api/taggedalgebraic.taggedalgebraic/TaggedAlgebraic),
using operators or members of a MySQLVal that aren't valid for the currently
held type will throw an assertion error. If you wish to avoid this, and are not
sure of the actual type, first validate the type is as you expect using the
<code class="lang-d"><span class="pln">kind</span></code> member.
</p>

<p>MySQLVal is used in all operations interally for mysql-native, and explicitly
for all safe API calls. Version 3.0.x and earlier of the mysql-native library
used Variant, so this module provides multiple shims to allow code to "just
work", and also provides conversion back to Variant.
</p>

<p>See the <a href="https://github.com/mysql-d/mysql-native/blob/master/SAFE_MIGRATION.md">Safe Migration</a> document for more details.
</p>
</section>

			
			<footer>
				<table class="license-info">
					<tr>
						<th>Authors</th>
						<td>
							
						</td>
					</tr>
					<tr>
						<th>Copyright</th>
						<td>
							
						</td>
					</tr>
					<tr>
						<th>License</th>
						<td>
							
						</td>
					</tr>
				</table>
				<p class="faint">Generated using the DDOX documentation generator</p>
			</footer>
		</div>
	</body>
</html>